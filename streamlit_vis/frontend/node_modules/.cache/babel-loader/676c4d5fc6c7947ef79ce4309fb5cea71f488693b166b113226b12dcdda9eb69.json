{"ast":null,"code":"import React from'react';import{Network}from'vis-network';import{DataSet}from'vis-data';import{Streamlit,StreamlitComponentBase,withStreamlitConnection}from\"streamlit-component-lib\";import{jsx as _jsx}from\"react/jsx-runtime\";class VisNetwork extends StreamlitComponentBase{constructor(){super(...arguments);this.container=/*#__PURE__*/React.createRef();this.state={network:null,nodes:new DataSet([]),edges:new DataSet([])};}componentDidMount(){this.setupNetwork();}componentDidUpdate(){// Get previous and current props\nconst prevProps=this.props.args;const currentProps=this.props.args;// Check if data or options changed\nif(JSON.stringify(prevProps.nodes)!==JSON.stringify(currentProps.nodes)||JSON.stringify(prevProps.edges)!==JSON.stringify(currentProps.edges)||JSON.stringify(prevProps.options)!==JSON.stringify(currentProps.options)){this.setupNetwork();}// Handle background image updates\nif(prevProps.background_image!==currentProps.background_image){this.updateBackgroundImage();}}setupNetwork(){if(!this.container.current)return;const props=this.props.args;// Clear existing network\nif(this.state.network){this.state.network.destroy();}// Create new datasets\nconst nodes=new DataSet(props.nodes);const edges=new DataSet(props.edges);// Create network\nconst network=new Network(this.container.current,{nodes,edges},props.options);// Set up event handlers\nnetwork.on('select',params=>{Streamlit.setComponentValue({selected:params.nodes,positions:this.getNodePositions()});});network.on('dragEnd',()=>{Streamlit.setComponentValue({selected:network.getSelectedNodes(),positions:this.getNodePositions()});});// Update state\nthis.setState({network,nodes,edges},()=>{this.updateBackgroundImage();});}getNodePositions(){if(!this.state.network||!this.state.nodes)return{};const positions={};this.state.nodes.forEach(node=>{const pos=this.state.network.getPosition(node.id);positions[node.id]={x:pos.x,y:pos.y};});return positions;}updateBackgroundImage(){if(!this.container.current||!this.state.network)return;const props=this.props.args;if(props.background_image){this.container.current.style.backgroundImage=`url(${props.background_image})`;this.container.current.style.backgroundSize='cover';this.container.current.style.backgroundPosition='center';}else{this.container.current.style.backgroundImage='none';}}render(){const props=this.props.args;return/*#__PURE__*/_jsx(\"div\",{ref:this.container,style:{width:'100%',height:props.height||'600px',border:'1px solid #ccc',position:'relative'}});}}export default withStreamlitConnection(VisNetwork);","map":{"version":3,"names":["React","Network","DataSet","Streamlit","StreamlitComponentBase","withStreamlitConnection","jsx","_jsx","VisNetwork","constructor","arguments","container","createRef","state","network","nodes","edges","componentDidMount","setupNetwork","componentDidUpdate","prevProps","props","args","currentProps","JSON","stringify","options","background_image","updateBackgroundImage","current","destroy","on","params","setComponentValue","selected","positions","getNodePositions","getSelectedNodes","setState","forEach","node","pos","getPosition","id","x","y","style","backgroundImage","backgroundSize","backgroundPosition","render","ref","width","height","border","position"],"sources":["C:/Users/owner/Documents/Innovative Dev/Sensor Sentry GUI - Streamlit/streamlit_vis/frontend/src/VisNetwork.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Network } from 'vis-network';\r\nimport { DataSet } from 'vis-data';\r\nimport {\r\n  Streamlit,\r\n  StreamlitComponentBase,\r\n  withStreamlitConnection,\r\n} from \"streamlit-component-lib\";\r\n\r\ninterface NetworkProps {\r\n  nodes: any[];\r\n  edges: any[];\r\n  options: any;\r\n  background_image?: string;\r\n  height?: string;\r\n}\r\n\r\ninterface State {\r\n  network: Network | null;\r\n  nodes: DataSet<any>;\r\n  edges: DataSet<any>;\r\n}\r\n\r\nclass VisNetwork extends StreamlitComponentBase<State> {\r\n  private container = React.createRef<HTMLDivElement>();\r\n  \r\n  public state: State = {\r\n    network: null,\r\n    nodes: new DataSet([]),\r\n    edges: new DataSet([])\r\n  };\r\n\r\n  public componentDidMount() {\r\n    this.setupNetwork();\r\n  }\r\n\r\n  public componentDidUpdate() {\r\n    // Get previous and current props\r\n    const prevProps = this.props.args as NetworkProps;\r\n    const currentProps = this.props.args as NetworkProps;\r\n\r\n    // Check if data or options changed\r\n    if (\r\n      JSON.stringify(prevProps.nodes) !== JSON.stringify(currentProps.nodes) ||\r\n      JSON.stringify(prevProps.edges) !== JSON.stringify(currentProps.edges) ||\r\n      JSON.stringify(prevProps.options) !== JSON.stringify(currentProps.options)\r\n    ) {\r\n      this.setupNetwork();\r\n    }\r\n\r\n    // Handle background image updates\r\n    if (prevProps.background_image !== currentProps.background_image) {\r\n      this.updateBackgroundImage();\r\n    }\r\n  }\r\n\r\n  private setupNetwork() {\r\n    if (!this.container.current) return;\r\n\r\n    const props = this.props.args as NetworkProps;\r\n\r\n    // Clear existing network\r\n    if (this.state.network) {\r\n      this.state.network.destroy();\r\n    }\r\n\r\n    // Create new datasets\r\n    const nodes = new DataSet(props.nodes);\r\n    const edges = new DataSet(props.edges);\r\n\r\n    // Create network\r\n    const network = new Network(\r\n      this.container.current,\r\n      { nodes, edges },\r\n      props.options\r\n    );\r\n\r\n    // Set up event handlers\r\n    network.on('select', (params) => {\r\n      Streamlit.setComponentValue({\r\n        selected: params.nodes,\r\n        positions: this.getNodePositions()\r\n      });\r\n    });\r\n\r\n    network.on('dragEnd', () => {\r\n      Streamlit.setComponentValue({\r\n        selected: network.getSelectedNodes(),\r\n        positions: this.getNodePositions()\r\n      });\r\n    });\r\n\r\n    // Update state\r\n    this.setState({ network, nodes, edges }, () => {\r\n      this.updateBackgroundImage();\r\n    });\r\n  }\r\n\r\n  private getNodePositions() {\r\n    if (!this.state.network || !this.state.nodes) return {};\r\n    \r\n    const positions: { [key: string]: { x: number, y: number } } = {};\r\n    this.state.nodes.forEach((node) => {\r\n      const pos = this.state.network!.getPosition(node.id);\r\n      positions[node.id] = { x: pos.x, y: pos.y };\r\n    });\r\n    \r\n    return positions;\r\n  }\r\n\r\n  private updateBackgroundImage() {\r\n    if (!this.container.current || !this.state.network) return;\r\n\r\n    const props = this.props.args as NetworkProps;\r\n    if (props.background_image) {\r\n      this.container.current.style.backgroundImage = `url(${props.background_image})`;\r\n      this.container.current.style.backgroundSize = 'cover';\r\n      this.container.current.style.backgroundPosition = 'center';\r\n    } else {\r\n      this.container.current.style.backgroundImage = 'none';\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    const props = this.props.args as NetworkProps;\r\n    \r\n    return (\r\n      <div\r\n        ref={this.container}\r\n        style={{\r\n          width: '100%',\r\n          height: props.height || '600px',\r\n          border: '1px solid #ccc',\r\n          position: 'relative'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStreamlitConnection(VisNetwork);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}