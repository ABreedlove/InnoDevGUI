{"ast":null,"code":"import React from'react';import{Network}from'vis-network';import{DataSet}from'vis-data';import{Streamlit,StreamlitComponentBase,withStreamlitConnection}from\"streamlit-component-lib\";import{jsx as _jsx}from\"react/jsx-runtime\";class VisNetwork extends StreamlitComponentBase{constructor(){super(...arguments);this.container=/*#__PURE__*/React.createRef();this.backgroundCanvas=null;this.backgroundImage=null;this.animationFrameId=null;this.state={network:null,nodes:new DataSet([]),edges:new DataSet([]),prevProps:null};this.renderBackground=()=>{if(!this.backgroundCanvas||!this.backgroundImage||!this.state.network){console.log(\"Missing elements for render\");return;}const ctx=this.backgroundCanvas.getContext('2d');if(!ctx)return;const position=this.state.network.getViewPosition();const scale=this.state.network.getScale();// Clear canvas\nctx.clearRect(0,0,this.backgroundCanvas.width,this.backgroundCanvas.height);// Calculate image scaling\nconst canvasAspect=this.backgroundCanvas.width/this.backgroundCanvas.height;const imageAspect=this.backgroundImage.width/this.backgroundImage.height;let renderWidth=this.backgroundCanvas.width;let renderHeight=this.backgroundCanvas.height;if(canvasAspect>imageAspect){renderWidth=renderHeight*imageAspect;}else{renderHeight=renderWidth/imageAspect;}// Center the image\nconst x=(this.backgroundCanvas.width-renderWidth)/2;const y=(this.backgroundCanvas.height-renderHeight)/2;try{ctx.drawImage(this.backgroundImage,x+position.x*scale,y+position.y*scale,renderWidth*scale,renderHeight*scale);}catch(e){console.error(\"Error drawing background:\",e);}this.animationFrameId=requestAnimationFrame(this.renderBackground);};}componentDidMount(){console.log(\"Component mounted\");Streamlit.setFrameHeight(600);this.setupNetwork();}componentDidUpdate(){const props=this.props.args;const prevProps=this.state.prevProps;console.log(\"Component updating\");console.log(\"Background image present:\",!!props.background_image);console.log(\"Previous background image present:\",!!(prevProps!==null&&prevProps!==void 0&&prevProps.background_image));if(props.background_image){console.log(\"Background image length:\",props.background_image.length);}// Only update if props actually changed\nif(prevProps===null||JSON.stringify(prevProps.nodes)!==JSON.stringify(props.nodes)||JSON.stringify(prevProps.edges)!==JSON.stringify(props.edges)||prevProps.background_image!==props.background_image){console.log(\"Props changed, updating component\");if(props.background_image!==(prevProps===null||prevProps===void 0?void 0:prevProps.background_image)){console.log(\"Background image changed, setting up new background\");this.setupBackground(props.background_image);}else{this.setupNetwork();}this.setState({prevProps:props});}}componentWillUnmount(){console.log(\"Component unmounting\");if(this.animationFrameId!==null){cancelAnimationFrame(this.animationFrameId);}if(this.state.network){this.state.network.destroy();}}setupBackground(backgroundImage){if(!this.container.current){console.log(\"Container not ready\");return;}console.log(\"Setting up background, image data present:\",!!backgroundImage);// Clear existing canvas and animation\nif(this.animationFrameId!==null){cancelAnimationFrame(this.animationFrameId);this.animationFrameId=null;}if(this.backgroundCanvas){console.log(\"Removing existing canvas\");this.backgroundCanvas.remove();this.backgroundCanvas=null;}if(backgroundImage){console.log(\"Creating new canvas\");// Create canvas\nconst canvas=document.createElement('canvas');this.backgroundCanvas=canvas;canvas.style.position='absolute';canvas.style.left='0px';canvas.style.top='0px';canvas.style.zIndex='-1';canvas.style.width='100%';canvas.style.height='100%';// Set canvas size to match container\nconst rect=this.container.current.getBoundingClientRect();canvas.width=rect.width;canvas.height=rect.height;console.log(\"Canvas size:\",canvas.width,canvas.height);// Add canvas to container\nthis.container.current.insertBefore(canvas,this.container.current.firstChild);// Create and load image\nconst img=new Image();img.onload=()=>{console.log(\"Image loaded successfully\");console.log(\"Image size:\",img.width,img.height);this.backgroundImage=img;this.startBackgroundRender();};img.onerror=e=>{console.error(\"Error loading image:\",e);};const imageUrl=backgroundImage.startsWith('data:image/')?backgroundImage:`data:image/png;base64,${backgroundImage}`;img.src=imageUrl;}}startBackgroundRender(){console.log(\"Starting background render\");if(this.animationFrameId!==null){cancelAnimationFrame(this.animationFrameId);}this.renderBackground();}setupNetwork(){if(!this.container.current)return;const props=this.props.args;// Clear existing network\nif(this.state.network){this.state.network.destroy();}// Create new datasets\nconst nodes=new DataSet(props.nodes);const edges=new DataSet(props.edges);// Create network with merged options\nconst network=new Network(this.container.current,{nodes,edges},{...props.options,height:'600px',autoResize:true,layout:{randomSeed:1,improvedLayout:true}});// Set up event handlers\nnetwork.on('select',params=>{Streamlit.setComponentValue({selected:params.nodes,positions:this.getNodePositions()});});network.on('dragEnd',()=>{Streamlit.setComponentValue({selected:network.getSelectedNodes(),positions:this.getNodePositions()});});this.setState({network,nodes,edges},()=>{if(props.background_image){this.setupBackground(props.background_image);}});}getNodePositions(){if(!this.state.network||!this.state.nodes)return{};const positions={};this.state.nodes.forEach(node=>{const pos=this.state.network.getPosition(node.id);positions[node.id]={x:pos.x,y:pos.y};});return positions;}render(){return/*#__PURE__*/_jsx(\"div\",{ref:this.container,style:{width:'100%',height:'600px',minHeight:'600px',border:'1px solid #ddd',borderRadius:'4px',backgroundColor:'#ffffff',position:'relative',overflow:'hidden'}});}}export default withStreamlitConnection(VisNetwork);","map":{"version":3,"names":["React","Network","DataSet","Streamlit","StreamlitComponentBase","withStreamlitConnection","jsx","_jsx","VisNetwork","constructor","arguments","container","createRef","backgroundCanvas","backgroundImage","animationFrameId","state","network","nodes","edges","prevProps","renderBackground","console","log","ctx","getContext","position","getViewPosition","scale","getScale","clearRect","width","height","canvasAspect","imageAspect","renderWidth","renderHeight","x","y","drawImage","e","error","requestAnimationFrame","componentDidMount","setFrameHeight","setupNetwork","componentDidUpdate","props","args","background_image","length","JSON","stringify","setupBackground","setState","componentWillUnmount","cancelAnimationFrame","destroy","current","remove","canvas","document","createElement","style","left","top","zIndex","rect","getBoundingClientRect","insertBefore","firstChild","img","Image","onload","startBackgroundRender","onerror","imageUrl","startsWith","src","options","autoResize","layout","randomSeed","improvedLayout","on","params","setComponentValue","selected","positions","getNodePositions","getSelectedNodes","forEach","node","pos","getPosition","id","render","ref","minHeight","border","borderRadius","backgroundColor","overflow"],"sources":["C:/Users/owner/Documents/Innovative Dev/Sensor Sentry GUI - Streamlit/streamlit_vis/frontend/src/VisNetwork.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Network } from 'vis-network';\r\nimport { DataSet } from 'vis-data';\r\nimport {\r\n  Streamlit,\r\n  StreamlitComponentBase,\r\n  withStreamlitConnection,\r\n} from \"streamlit-component-lib\";\r\n\r\ninterface NetworkProps {\r\n  nodes: any[];\r\n  edges: any[];\r\n  options: any;\r\n  background_image?: string;\r\n  height?: string;\r\n}\r\n\r\ninterface State {\r\n  network: Network | null;\r\n  nodes: DataSet<any>;\r\n  edges: DataSet<any>;\r\n  prevProps: NetworkProps | null;\r\n}\r\n\r\nclass VisNetwork extends StreamlitComponentBase<State> {\r\n  private container = React.createRef<HTMLDivElement>();\r\n  private backgroundCanvas: HTMLCanvasElement | null = null;\r\n  private backgroundImage: HTMLImageElement | null = null;\r\n  private animationFrameId: number | null = null;\r\n  \r\n  public state: State = {\r\n    network: null,\r\n    nodes: new DataSet([]),\r\n    edges: new DataSet([]),\r\n    prevProps: null\r\n  };\r\n\r\n  public componentDidMount() {\r\n    console.log(\"Component mounted\");\r\n    Streamlit.setFrameHeight(600);\r\n    this.setupNetwork();\r\n  }\r\n\r\n  public componentDidUpdate() {\r\n    const props = this.props.args as NetworkProps;\r\n    const prevProps = this.state.prevProps;\r\n\r\n    console.log(\"Component updating\");\r\n    console.log(\"Background image present:\", !!props.background_image);\r\n    console.log(\"Previous background image present:\", !!prevProps?.background_image);\r\n    \r\n    if (props.background_image) {\r\n      console.log(\"Background image length:\", props.background_image.length);\r\n    }\r\n\r\n    // Only update if props actually changed\r\n    if (prevProps === null || \r\n        JSON.stringify(prevProps.nodes) !== JSON.stringify(props.nodes) ||\r\n        JSON.stringify(prevProps.edges) !== JSON.stringify(props.edges) ||\r\n        prevProps.background_image !== props.background_image) {\r\n      \r\n      console.log(\"Props changed, updating component\");\r\n      \r\n      if (props.background_image !== prevProps?.background_image) {\r\n        console.log(\"Background image changed, setting up new background\");\r\n        this.setupBackground(props.background_image);\r\n      } else {\r\n        this.setupNetwork();\r\n      }\r\n      \r\n      this.setState({ prevProps: props });\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    console.log(\"Component unmounting\");\r\n    if (this.animationFrameId !== null) {\r\n      cancelAnimationFrame(this.animationFrameId);\r\n    }\r\n    if (this.state.network) {\r\n      this.state.network.destroy();\r\n    }\r\n  }\r\n\r\n  private setupBackground(backgroundImage?: string) {\r\n    if (!this.container.current) {\r\n      console.log(\"Container not ready\");\r\n      return;\r\n    }\r\n\r\n    console.log(\"Setting up background, image data present:\", !!backgroundImage);\r\n\r\n    // Clear existing canvas and animation\r\n    if (this.animationFrameId !== null) {\r\n      cancelAnimationFrame(this.animationFrameId);\r\n      this.animationFrameId = null;\r\n    }\r\n    \r\n    if (this.backgroundCanvas) {\r\n      console.log(\"Removing existing canvas\");\r\n      this.backgroundCanvas.remove();\r\n      this.backgroundCanvas = null;\r\n    }\r\n\r\n    if (backgroundImage) {\r\n      console.log(\"Creating new canvas\");\r\n      // Create canvas\r\n      const canvas = document.createElement('canvas');\r\n      this.backgroundCanvas = canvas;\r\n      canvas.style.position = 'absolute';\r\n      canvas.style.left = '0px';\r\n      canvas.style.top = '0px';\r\n      canvas.style.zIndex = '-1';\r\n      canvas.style.width = '100%';\r\n      canvas.style.height = '100%';\r\n      \r\n      // Set canvas size to match container\r\n      const rect = this.container.current.getBoundingClientRect();\r\n      canvas.width = rect.width;\r\n      canvas.height = rect.height;\r\n      console.log(\"Canvas size:\", canvas.width, canvas.height);\r\n      \r\n      // Add canvas to container\r\n      this.container.current.insertBefore(canvas, this.container.current.firstChild);\r\n\r\n      // Create and load image\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        console.log(\"Image loaded successfully\");\r\n        console.log(\"Image size:\", img.width, img.height);\r\n        this.backgroundImage = img;\r\n        this.startBackgroundRender();\r\n      };\r\n\r\n      img.onerror = (e) => {\r\n        console.error(\"Error loading image:\", e);\r\n      };\r\n      \r\n      const imageUrl = backgroundImage.startsWith('data:image/')\r\n        ? backgroundImage\r\n        : `data:image/png;base64,${backgroundImage}`;\r\n      \r\n      img.src = imageUrl;\r\n    }\r\n}\r\n\r\n  private renderBackground = () => {\r\n    if (!this.backgroundCanvas || !this.backgroundImage || !this.state.network) {\r\n      console.log(\"Missing elements for render\");\r\n      return;\r\n    }\r\n    \r\n    const ctx = this.backgroundCanvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    const position = this.state.network.getViewPosition();\r\n    const scale = this.state.network.getScale();\r\n    \r\n    // Clear canvas\r\n    ctx.clearRect(0, 0, this.backgroundCanvas.width, this.backgroundCanvas.height);\r\n    \r\n    // Calculate image scaling\r\n    const canvasAspect = this.backgroundCanvas.width / this.backgroundCanvas.height;\r\n    const imageAspect = this.backgroundImage.width / this.backgroundImage.height;\r\n    \r\n    let renderWidth = this.backgroundCanvas.width;\r\n    let renderHeight = this.backgroundCanvas.height;\r\n    \r\n    if (canvasAspect > imageAspect) {\r\n      renderWidth = renderHeight * imageAspect;\r\n    } else {\r\n      renderHeight = renderWidth / imageAspect;\r\n    }\r\n\r\n    // Center the image\r\n    const x = (this.backgroundCanvas.width - renderWidth) / 2;\r\n    const y = (this.backgroundCanvas.height - renderHeight) / 2;\r\n\r\n    try {\r\n      ctx.drawImage(\r\n        this.backgroundImage,\r\n        x + position.x * scale,\r\n        y + position.y * scale,\r\n        renderWidth * scale,\r\n        renderHeight * scale\r\n      );\r\n    } catch (e) {\r\n      console.error(\"Error drawing background:\", e);\r\n    }\r\n\r\n    this.animationFrameId = requestAnimationFrame(this.renderBackground);\r\n};\r\n\r\n  private startBackgroundRender() {\r\n    console.log(\"Starting background render\");\r\n    if (this.animationFrameId !== null) {\r\n      cancelAnimationFrame(this.animationFrameId);\r\n    }\r\n    this.renderBackground();\r\n  }\r\n\r\n  private setupNetwork() {\r\n    if (!this.container.current) return;\r\n\r\n    const props = this.props.args as NetworkProps;\r\n\r\n    // Clear existing network\r\n    if (this.state.network) {\r\n      this.state.network.destroy();\r\n    }\r\n\r\n    // Create new datasets\r\n    const nodes = new DataSet(props.nodes);\r\n    const edges = new DataSet(props.edges);\r\n\r\n    // Create network with merged options\r\n    const network = new Network(\r\n      this.container.current,\r\n      { nodes, edges },\r\n      {\r\n        ...props.options,\r\n        height: '600px',\r\n        autoResize: true,\r\n        layout: {\r\n          randomSeed: 1,\r\n          improvedLayout: true\r\n        }\r\n      }\r\n    );\r\n\r\n    // Set up event handlers\r\n    network.on('select', (params) => {\r\n      Streamlit.setComponentValue({\r\n        selected: params.nodes,\r\n        positions: this.getNodePositions()\r\n      });\r\n    });\r\n\r\n    network.on('dragEnd', () => {\r\n      Streamlit.setComponentValue({\r\n        selected: network.getSelectedNodes(),\r\n        positions: this.getNodePositions()\r\n      });\r\n    });\r\n\r\n    this.setState({ network, nodes, edges }, () => {\r\n      if (props.background_image) {\r\n        this.setupBackground(props.background_image);\r\n      }\r\n    });\r\n  }\r\n\r\n  private getNodePositions() {\r\n    if (!this.state.network || !this.state.nodes) return {};\r\n    \r\n    const positions: { [key: string]: { x: number, y: number } } = {};\r\n    this.state.nodes.forEach((node) => {\r\n      const pos = this.state.network!.getPosition(node.id);\r\n      positions[node.id] = { x: pos.x, y: pos.y };\r\n    });\r\n    \r\n    return positions;\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <div\r\n        ref={this.container}\r\n        style={{\r\n          width: '100%',\r\n          height: '600px',\r\n          minHeight: '600px',\r\n          border: '1px solid #ddd',\r\n          borderRadius: '4px',\r\n          backgroundColor: '#ffffff',\r\n          position: 'relative',\r\n          overflow: 'hidden'\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStreamlitConnection(VisNetwork);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}